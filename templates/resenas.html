{% extends "base.html" %}

{% block content %}
<h2>Reseñas</h2>

<h3>Agregar reseña</h3>
<form method="POST">

    <select name="libro" required>
        <option value="">Selecciona un libro</option>
        {% for libro in libros %}
            <option value="{{ libro.id }}">{{ libro.titulo }}</option>
        {% endfor %}
    </select>

    <select name="calificacion" required>
        <option value="">Calificación</option>
        {% for i in range(1, 6) %}
            <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
    </select>

    <textarea name="comentario" placeholder="Escribe tu reseña"></textarea>

    <button type="submit" class="btn btn-primary">Guardar</button>
</form>

<hr>

<h3>Lista de reseñas</h3>
<table>
    <tr>
        <th>Usuario</th>
        <th>Libro</th>
        <th>Calificación</th>
        <th>Comentario</th>
        <th>Fecha</th>
    </tr>

    {% for resena in resenas %}
    <tr>
        <td>{{ resena.usuario.nombre or resena.usuario.username }}</td>
        <td>{{ resena.libro.titulo }}</td>
        <td>{{ resena.calificacion }}</td>
        <td>{{ resena.comentario }}</td>
        <td>{{ resena.fecha }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
